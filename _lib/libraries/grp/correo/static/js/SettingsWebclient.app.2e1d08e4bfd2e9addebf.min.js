webpackJsonp([20],{265:function(e,t,s){function i(e){this.sName="",this.visible=n.observable(!0),this.baseHash=n.observable(""),this.hash=n.observable(""),this.linkText=n.observable(e),this.isCurrent=n.observable(!1),this.recivedAnim=n.observable(!1).extend({autoResetToFalse:500}),this.unseenCount=n.observable(0),this.allowChangeTitle=n.observable(!1),this.inactiveTitle=n.observable(""),this.excludedHashes=n.observableArray([])}var n=s(46),a=s(191);i.prototype.ViewTemplate="CoreWebclient_HeaderItemView",i.prototype.setName=function(e){this.sName=e.toLowerCase(),""===this.baseHash()?(this.hash(a.buildHashFromArray([e.toLowerCase()])),this.baseHash(this.hash())):this.hash(this.baseHash())},e.exports=i},400:function(e,t,s){"use strict";e.exports=function(e){var t=s(180),i=t.getUserRole()===Enums.UserRole.SuperAdmin,n=t.getUserRole()===Enums.UserRole.NormalUser,a=t.getUserRole()===Enums.UserRole.Customer,r=null;if(i||n||a){var o=s(401);if(o.init(e),i)return{getAbstractSettingsFormViewClass:function(){return s(402)}};if(n||a)return{getScreens:function(){var e={};return e[o.HashModuleName]=function(){return s(403)},e},getHeaderItem:function(){if(null===r){var e=s(43),t=s(265);r=new t(e.i18n("COREWEBCLIENT/HEADING_SETTINGS_TABNAME"))}return{item:r,name:o.HashModuleName}},registerSettingsTab:function(e,t,i){var n=s(403);n.registerTab(e,t,i)},registerSettingsTabSection:function(e,t,i){var n=s(403);n.registerTabSection(e,t,i)},getAbstractSettingsFormViewClass:function(){return s(402)},setAddHash:function(e){var t=s(403);t.setAddHash(e)}}}return null}},401:function(e,t,s){"use strict";var i=s(2),n=s(44);e.exports={HashModuleName:"settings",TabsOrder:["common","mail","mail-accounts","contacts","calendar","files","mobilesync","outlooksync","helpdesk","openpgp"],init:function(e){var t=e.SettingsWebclient;i.isEmpty(t)||(this.TabsOrder=n.pArray(t.TabsOrder,this.TabsOrder))}}},402:function(e,t,s){"use strict";function i(e){this.sServerModule=e?e:"Core",this.isSaving=a.observable(!1),this.visible=a.observable(!0),this.sSavedState="",this.bShown=!1,this.SettingsTabName="",this.SettingsTabTitle="",this.aSettingsSections=[]}var n=s(2),a=s(46),r=s(43),o=s(187),h=s(182),u=s(184),c=s(188),b=s(197);i.prototype.ViewTemplate="",i.prototype.addSettingsSection=function(e){this.aSettingsSections.push(e)},i.prototype.showTab=function(e){this.bShown=!0,this.revert(),n.isFunction(this.onShow)&&this.onShow(e),n.each(this.aSettingsSections,function(t){n.isFunction(t.onShow)&&t.onShow(e)})},i.prototype.hasUnsavedChanges=function(){var e=this.getCurrentState()!==this.sSavedState;return n.each(this.aSettingsSections,function(t){n.isFunction(t.getCurrentState)&&(e=e||t.getCurrentState()!==t.sSavedState)}),e},i.prototype.hide=function(e,t){this.hasUnsavedChanges()?c.showPopup(b,[r.i18n("COREWEBCLIENT/CONFIRM_DISCARD_CHANGES"),n.bind(function(s){s?(this.bShown=!1,e(),this.revert()):n.isFunction(t)&&t()},this)]):(this.bShown=!1,e())},i.prototype.getCurrentValues=function(){return[]},i.prototype.getCurrentState=function(){var e=this.getCurrentValues();return e.join(":")},i.prototype.updateSavedState=function(){this.sSavedState=this.getCurrentState()},i.prototype.revertGlobalValues=function(){},i.prototype.revert=function(){n.each(this.aSettingsSections,function(e){n.isFunction(e.revert)&&e.revert()}),this.revertGlobalValues(),this.updateSavedState()},i.prototype.getParametersForSave=function(){return{}},i.prototype.save=function(){n.isFunction(this.validateBeforeSave)&&!this.validateBeforeSave()||(this.isSaving(!0),o.send(this.sServerModule,"UpdateSettings",this.getParametersForSave(),this.onResponse,this))},i.prototype.applySavedValues=function(e){},i.prototype.onResponse=function(e,t){if(this.isSaving(!1),e.Result){var s=t.Parameters;this.updateSavedState(),this.applySavedValues(s),u.showReport(r.i18n("COREWEBCLIENT/REPORT_SETTINGS_UPDATE_SUCCESS"))}else h.showErrorByCode(e,r.i18n("COREWEBCLIENT/ERROR_SAVING_SETTINGS_FAILED"))},i.prototype.setAccessLevel=function(e,t){},e.exports=i},403:function(e,t,s){"use strict";function i(){u.call(this,"SettingsWebclient"),this.tabs=r.observableArray([]),this.currentTab=r.observable(null),o.subscribeEvent("OpenSettingTab",n.bind(function(e){this.changeTab(e.Name)},this)),o.broadcastEvent("SettingsWebclient::ConstructView::after",{Name:this.ViewConstructorName,View:this})}var n=s(2),a=s(1),r=s(46),o=s(180),h=s(191),u=s(194),c=s(401),b=a("html");n.extendOwn(i.prototype,u.prototype),i.prototype.ViewTemplate="SettingsWebclient_SettingsView",i.prototype.ViewConstructorName="CSettingsView",i.prototype.registerTab=function(e,t,s){var i=c.TabsOrder.length,a=e(),r=n.findWhere(this.tabs(),{name:t});n.isEmpty(a)||(a.SettingsTabName=t,a.SettingsTabTitle=s,r&&(n.isArray(r.sections)&&(n.each(r.sections,function(e){a.addSettingsSection(e)}),delete r.sections),r.view=a)),r||this.tabs.push({view:a,name:t}),this.tabs(n.sortBy(this.tabs(),function(e){var t=n.indexOf(c.TabsOrder,e.name);return t!==-1?t:i}))},i.prototype.registerTabSection=function(e,t){var s=n.findWhere(this.tabs(),{name:t}),i=e();s?s.view.addSettingsSection(i):(this.registerTab(function(){return{}},t,""),s=n.findWhere(this.tabs(),{name:t}),s&&(n.isArray(s.sections)||(s.sections=[]),s.sections.push(i)))},i.prototype.hasUnsavedChanges=function(){var e=this.currentTab();return e&&e.view&&n.isFunction(e.view.hasUnsavedChanges)&&e.view.hasUnsavedChanges()},i.prototype.discardChanges=function(){var e=this.currentTab();e&&e.view&&n.isFunction(e.view.revert)&&e.view.revert()},i.prototype.onShow=function(){b.addClass("non-adjustable")},i.prototype.onHide=function(){b.removeClass("non-adjustable")},i.prototype.onRoute=function(e){var t=e.shift(),s=this.currentTab(),i=n.find(this.tabs(),function(e){return e.name===t}),a=function(){i&&(n.isFunction(i.view.showTab)&&i.view.showTab(e),this.currentTab(i),i.name!==t&&h.replaceHashDirectly([c.HashModuleName,i.name]))}.bind(this),r=n.bind(function(){s&&h.replaceHashDirectly([c.HashModuleName,s.name])},this),o=!0;return s&&t===s.name?void(n.isFunction(s.view.showTab)&&s.view.showTab(e)):(i&&i.view.visible&&!i.view.visible()&&(i=n.find(this.tabs(),function(e){return!e.view.visible||e.view.visible()})),i?s&&n.isFunction(s.view.hide)&&(s.view.hide(a,r),o=!1):s||(i=n.find(this.tabs(),function(e){return!e.view.visible||e.view.visible()})),void(o&&a()))},i.prototype.changeTab=function(e){h.setHash([c.HashModuleName,e])},i.prototype.setAddHash=function(e){h.setHash(n.union([c.HashModuleName,this.currentTab()?this.currentTab().name:""],e))},e.exports=new i}});