# CHANGELOG

## 2026-02-18
- Extensión de accesibilidad y contenido diario:
  - Control de letra en Herramientas (`A+`, `A-`, `Restablecer`), rango 85%-150%, persistencia local.
  - Atajos `Ctrl+=` y `Ctrl+-` para ajuste rápido.
  - Escala aplicada al lector, comentarios y vista de devocionales (global desde preferencias guardadas).
- Generador de imagen de versículo:
  - Fondos locales en `public/assets/backgrounds/`.
  - Selector de estilo para tarjeta (`Modo oscuro` / `Modo claro`).
  - Descarga PNG, compartir (Web Share) y copiar imagen (fallback descarga).
- Página de inicio “Versículo del día”:
  - Vista `views/home_daily.php` con tarjeta destacada.
  - Botones: `Leer contexto`, `Compartir`, `Ir a lectura`, `No mostrar más hoy`.
  - Cache diaria en tabla `daily_cache`.
- Nuevo módulo “Devocionales”:
  - Vista `views/devotional.php`.
  - Generación diaria con estructura fija (A-F).
  - Historial persistido en tabla `devotionals`.
  - Compartir como texto e imagen.
- Configuración ampliada:
  - Toggle `Mostrar Versículo del día al iniciar`.
  - Toggle `Activar devocionales automáticos`.
  - Mensaje de seguridad para token vía `.env`.
- Nuevos servicios:
  - `DailyVerseService`
  - `DevotionalService`
  - `ImageCardService`
- Persistencia adicional:
  - Tabla `user_prefs` (font_scale, show_daily, auto_devotional, theme).
  - Endpoint `api.prefs.save`.
- Rebranding completo:
  - Nombre principal: `Biblia para todos`
  - Branding alterno: `BibliaSoft`
  - Slogan visible: `Biblia para todos`
- Nuevo layout lector profesional:
  - 3 columnas fijas en escritorio (Libros / Capítulos / Lectura + panel de ayuda)
  - drawer adaptado en móvil para navegación y ayuda
- Selección avanzada de versículos:
  - selección múltiple con `Shift+click`
  - `Copiar selección`, `Copiar como párrafo`, `Compartir`
- Panel de ayuda por pestañas:
  - `Contexto`, `Comentarios`, `Mis notas`, `Vincular`, `Herramientas`
  - Notas por rango con etiquetas
  - Vínculos manuales por rango
- PWA instalable y offline:
  - `manifest.json`
  - `sw.js`
  - cache de assets y capítulos consultados
  - acciones de “Generar…” deshabilitadas sin conexión
- Búsqueda avanzada con atajo `Ctrl+K`:
  - filtros por modo de búsqueda, libro y rango de capítulos
  - apertura directa al resultado
- Integración segura de generación por API:
  - endpoint `public/api/generate.php`
  - carga de `.env` sin hardcodear claves
  - cache en `ai_cache` por libro/capítulo/rango/modo/prompt_hash
- Extras implementados:
  - Historial de capítulos recientes
  - Favoritos de versículos (endpoint preparado)
- Inspección completa del repositorio base `C:\facilweb\htdocs\BIBLIASOFT`.
- Validación de estructura SQLite en:
  - `01RVR1960.bbli`
  - `01RVR1960x.bbli`
  - `01RVR1960x.cmti`
  - `strong.lexx`
  - `spurgeon.devx`
- Creación de MVP inicial PHP 7.3:
  - Front controller y routing básico en `public/index.php`.
  - Servicios para lectura bíblica, comentarios por rangos, sanitización HTML, búsqueda y módulo IA (stubs).
  - CRUD de apuntes y vínculos por versículo.
  - Vistas responsive tipo app lector.
- Creación de BD de aplicación independiente en `storage/app.sqlite` (esquema en `app/Database/schema.sql`).
- Script de indexado de búsqueda en `scripts/index_fts.php` (FTS5 + fallback).
- Documentación técnica inicial:
  - `docs/ARQUITECTURA.md`
  - `docs/ROADMAP.md`
  - `docs/LICENCIA_Y_DISTRIBUCION.md`
  - `docs/INSTALACION.md`
